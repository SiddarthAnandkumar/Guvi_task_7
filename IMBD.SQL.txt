CREATE DATABASE guvi_task;
use guvi_task ;


CREATE TABLE movie (
    movie_id INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(100) NOT NULL,
    release_year YEAR,
    description TEXT
);

CREATE TABLE media (
    media_id INT PRIMARY KEY AUTO_INCREMENT,
    movie_id INT,
    media_type ENUM('Image', 'Video'),
    media_url VARCHAR(255),
    FOREIGN KEY (movie_id) REFERENCES movie(movie_id)
);


CREATE TABLE genre (
    genre_id INT PRIMARY KEY AUTO_INCREMENT,
    genre_name VARCHAR(50) NOT NULL
);


CREATE TABLE movie_genre (
    movie_id INT,
    genre_id INT,
    PRIMARY KEY (movie_id, genre_id),
    FOREIGN KEY (movie_id) REFERENCES movie(movie_id),
    FOREIGN KEY (genre_id) REFERENCES genre(genre_id)
);


CREATE TABLE user (
    user_id INT PRIMARY KEY AUTO_INCREMENT,
    user_name VARCHAR(50) NOT NULL,
    email VARCHAR(100)
);

CREATE TABLE review (
    review_id INT PRIMARY KEY AUTO_INCREMENT,
    movie_id INT,
    user_id INT,
    rating DECIMAL(2,1),
    comments TEXT,
    review_date DATETIME DEFAULT NOW(),
    FOREIGN KEY (movie_id) REFERENCES movie(movie_id),
    FOREIGN KEY (user_id) REFERENCES user(user_id)
);

CREATE TABLE artist (
    artist_id INT PRIMARY KEY AUTO_INCREMENT,
    artist_name VARCHAR(100) NOT NULL
);

CREATE TABLE skill (
    skill_id INT PRIMARY KEY AUTO_INCREMENT,
    skill_name VARCHAR(50) NOT NULL
);

CREATE TABLE artist_skill (
    artist_id INT,
    skill_id INT,
    PRIMARY KEY (artist_id, skill_id),
    FOREIGN KEY (artist_id) REFERENCES artist(artist_id),
    FOREIGN KEY (skill_id) REFERENCES skill(skill_id)
);

CREATE TABLE role (
    role_id INT PRIMARY KEY AUTO_INCREMENT,
    role_name VARCHAR(50) NOT NULL
);

CREATE TABLE movie_cast (
    movie_id INT,
    artist_id INT,
    role_id INT,
    PRIMARY KEY (movie_id, artist_id, role_id),
    FOREIGN KEY (movie_id) REFERENCES movie(movie_id),
    FOREIGN KEY (artist_id) REFERENCES artist(artist_id),
    FOREIGN KEY (role_id) REFERENCES role(role_id)
);


INSERT INTO movie (title, release_year, description)
VALUES
('Vikram', 2022, 'Action thriller starring Kamal Haasan.'),
('Leo', 2023, 'Action drama starring Vijay.');

INSERT INTO media (movie_id, media_type, media_url)
VALUES
(1, 'Image', 'vikram_poster.jpg'),
(1, 'Video', 'vikram_trailer.mp4'),
(2, 'Image', 'leo_poster.jpg'),
(2, 'Video', 'leo_trailer.mp4');

INSERT INTO genre (genre_name)
VALUES ('Action'), ('Thriller'), ('Drama');

INSERT INTO movie_genre (movie_id, genre_id)
VALUES
(1, 1),
(1, 2),
(2, 1),
(2, 3);


INSERT INTO user (user_name, email)
VALUES
('Siddarth', 'sid@example.com'),
('Mohan', 'mohan@example.com');

INSERT INTO review (movie_id, user_id, rating, comments)
VALUES
(1, 1, 9.5, 'Outstanding performance by Kamal Haasan.'),
(2, 2, 8.8, 'Vijay was amazing, great direction.');

INSERT INTO artist (artist_name)
VALUES
('Kamal Haasan'),
('Vijay'),
('Lokesh Kanagaraj'),
('Anirudh Ravichander');

INSERT INTO skill (skill_name)
VALUES
('Acting'), ('Directing'), ('Music'), ('Writing');

INSERT INTO artist_skill (artist_id, skill_id)
VALUES
(1, 1), -- Kamal - Acting
(2, 1), -- Vijay - Acting
(3, 2), -- Lokesh - Directing
(4, 3); -- Anirudh - Music

INSERT INTO role (role_name)
VALUES
('Actor'), ('Director'), ('Music Director');

INSERT INTO movie_cast (movie_id, artist_id, role_id)
VALUES
(1, 1, 1), -- Kamal - Actor in Vikram
(1, 3, 2), -- Lokesh - Director in Vikram
(1, 4, 3), -- Anirudh - Music in Vikram
(2, 2, 1), -- Vijay - Actor in Leo
(2, 3, 2), -- Lokesh - Director in Leo
(2, 4, 3); -- Anirudh - Music in Leo


SELECT * FROM movie;
SELECT * FROM media;
SELECT * FROM genre;
SELECT * FROM movie_genre;
SELECT * FROM user;
SELECT * FROM review;
SELECT * FROM artist;
SELECT * FROM skill;
SELECT * FROM artist_skill;
SELECT * FROM role;
SELECT * FROM movie_cast;